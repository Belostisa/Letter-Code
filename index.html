<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Encrypted Letter</title>
  <link rel="stylesheet" href="style3.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

  <!-- FULL BACKGROUND VIDEO -->
  <div class="bg-video">
    <video autoplay muted loop playsinline>
      <source src="media/bg.mp4" type="video/mp4">
    </video>
  </div>
  
  <audio id="bgAudio" loop>
  <source src="media/deftoness.mp3" type="audio/mpeg">
</audio>

  <!-- FLOWERS VIDEO (unchanged) -->
  <section class="flowers-section">
    <video autoplay muted loop playsinline class="flowers-video">
      <source src="media/flowers2.mp4" type="video/mp4">
    </video>
  </section>


  <!-- ENVELOPE SECTION (unchanged) -->
  <section class="envelope-section">
    <div class="envelope" onclick="openEmail()">
      <div class="envelope-back"></div>
      <div class="inbox-label">INBOX</div>
      <div class="envelope-flap"></div>
    </div>
  </section>

  <!-- EMAIL WINDOW (unchanged) -->
  <div class="email-overlay" id="emailOverlay">
    <div class="email-window">

      <div class="email-header">
        <span class="email-title">Inbox</span>
        <button class="email-close" onclick="closeEmail()">✕</button>
      </div>

      <div class="email-body" id="emailContent"></div>

      <div class="email-footer">
        <button onclick="prevPage()">◀ Prev</button>
        <span id="pageIndicator">1 / 3</span>
        <button onclick="nextPage()">Next ▶</button>
      </div>

    </div>
  </div>

<script>
const pages = [
`Алла, я думаю мне очень повезло встретить тебя. Спасибо за тепло, доверие, и все моменты, что ты могла мне дать. Мне жаль, что все складывается именно так и я не смогу показать и дать тебе всего, чего ты заслуживаешь, просто за то, что ты есть.

Это время особенно важно для меня. В нём я ощутила простую, спокойную связь, в которой мне не приходилось защищаться, притворяться или объясняться. Я рада, что и ты в свою очередь могла мне открыться. Всё это помогло мне убедиться, что подобного рода чувства имеют место быть и в моей жизни.

Спасибо, что позволила мне быть рядом, насколько это возможно. Я верю, что мы обе достойны любви, в которой не нужно что-то доказывать, быть удобной. Той, где можно быть собой, а не прятаться за маски играя друг с другом в игры. Не прятаться и от себя.`,

`Я понимаю, почему последнее время ты отдалилась. Возможно, так проще справляться, потихоньку стирая всё. И пусть мне тяжело это чувствовать, я не злюсь. Но я не хочу притворяться, что это ничего не значило, вероятно не только для меня.

Я надеюсь, что однажды ты выберешь себя, без страха или чувства долга, и позволишь себе жить свободно. Что когда-нибудь ты сможешь испытать любовь не через призму тревоги и защиты. В первую очередь к себе. И быть уверенной и спокойной в этом чувстве.

Ты много носишь в себе, и я это вижу. Все вещи, что ты описывала — не просто часть тебя, а то, над чем можно и нужно работать. Они имеют свойство разрушать. А ты заслуживаешь того, чтобы тебе жилось легче, с поддержкой. Я думаю ты достаточно сильная, чтобы её принять.
`,

`Пожалуйста, не считай себя плохим человеком. Я никогда и ни за что не считала тебя таковой. Что бы ты ни думала сама, что бы ни выбирала. Ты показывала себя чувствующей и живой, и именно поэтому ты стала мне важна. 

Я очень хочу, чтобы у тебя получилось делать то, что тебе действительно интересно. Чтобы хватало сил и желания на свои идеи. Ты усердная и способная, поэтому я даже не сомневаюсь, что так и будет.

Мне будет больно тебя отпускать, но я все равно рада, что у нас был шанс узнать друг друга и провести это время вместе. Надеюсь, когда-нибудь оно снова нас сведёт, и ты будешь счастливой и свободной.`
];

let currentPage = 0;

function openEmail() {
  document.querySelector(".envelope").classList.add("open");
  document.getElementById("emailOverlay").style.display = "flex";
  renderPage();
}
function enableAudio() {
  const audio = document.getElementById("bgAudio");
  audio.muted = false;
  audio.volume = 0.35;
  audio.play();
  document.removeEventListener("click", enableAudio);
}

document.addEventListener("click", enableAudio);


function closeEmail() {
  document.querySelector(".envelope").classList.remove("open");
  document.getElementById("emailOverlay").style.display = "none";
}

function renderPage() {
  document.getElementById("emailContent").textContent = pages[currentPage];
  document.getElementById("pageIndicator").textContent =
    `${currentPage + 1} / ${pages.length}`;
}

function nextPage() {
  if (currentPage < pages.length - 1) {
    currentPage++;
    renderPage();
  }
}

function prevPage() {
  if (currentPage > 0) {
    currentPage--;
    renderPage();
  }
}
</script>

</body>
</html>
